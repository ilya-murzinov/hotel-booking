<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:m="http://code.google.com/p/gmaps4jsf/"
      xmlns:p="http://primefaces.org/ui"
        >
<f:metadata>
    <f:viewParam name="id" value="#{hotelBean.id}"/>
</f:metadata>
<h:head>
    <title><ui:insert name="title">Hotel Booking</ui:insert></title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <script type="text/javascript"
            src="https://maps.googleapis.com/maps/api/js">
    </script>
</h:head>

<h:body>
    <h:form>
        <p:panel header="#{hotelBean.hotel.name}">
            <f:facet name="actions">
                <p:button value="Edit" outcome="edit">
                    <f:param name="id" value="#{hotelBean.id}"/>
                </p:button>
                <p:commandButton value="Delete" action="#{hotelBean.deleteHotel}"/>
                <p:button value="Home"
                          outcome="index"/>
            </f:facet>
            <p:panelGrid columns="2" style="margin-bottom: 10px;">
                <h:outputLabel>Name:</h:outputLabel>
                <h:outputText value="#{hotelBean.hotel.name}" style="font-weight:bold"/>
                <h:outputLabel>Address:</h:outputLabel>
                <h:outputText value="#{hotelBean.hotel.address}" style="font-weight:bold"/>
                <h:outputLabel>Phone:</h:outputLabel>
                <h:outputText value="#{hotelBean.hotel.phone}" style="font-weight:bold"/>
                <h:outputLabel>Price:</h:outputLabel>
                <h:outputText value="#{hotelBean.hotel.price}" style="font-weight:bold"/>
                <h:outputLabel>Description:</h:outputLabel>
                <h:outputText value="#{hotelBean.hotel.description}" style="font-weight:bold"/>
            </p:panelGrid>

            <m:map address="#{hotelBean.hotel.address}">
                <m:marker/>
                <m:htmlInformationWindow htmlText="#{hotelBean.hotel.address}"/>
            </m:map>
        </p:panel>
    </h:form>

    <p:panel header="Comments">
        <h:form id="comments">
            <h:dataTable id="comment-table" value="#{hotelBean.hotel.comments}" var="comment">
                <h:column>
                    <h:outputLabel style="font-weight:bold">#{comment.author} :</h:outputLabel>
                    #{comment.text}
                </h:column>
                <h:column>
                    <h:commandLink value="Delete"
                                   action="#{hotelBean.deleteComment(comment.id)}"
                                   rendered="#{userBean.userName.equals(comment.author)}"/>
                </h:column>
            </h:dataTable>
        </h:form>
        <h:form id="add-comment">
            <h:panelGrid columns="2">
                <h:outputLabel>Author: </h:outputLabel>
                <p:inputText
                        id="author"
                        size="20"
                        required="true"
                        maxlength="30"
                        rendered="#{userBean.guest}"
                        value="#{hotelBean.commentModel.author}"/>
                <h:outputText value="#{userBean.userName}"
                              rendered="#{userBean.user}"
                              style="font-weight:bold"/>
                <h:outputLabel>Comment: </h:outputLabel>
                <p:inputTextarea
                        id="text"
                        required="true"
                        maxlength="1000"
                        rows="5"
                        cols="50"
                        value="#{hotelBean.commentModel.text}"/>
                <p:commandButton
                        value="Add comment"
                        action="#{hotelBean.addComment}"/>
            </h:panelGrid>
        </h:form>
    </p:panel>
</h:body>
</html>